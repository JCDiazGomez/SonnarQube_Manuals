<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SonarQube Quick Guide</title>
<style>
  body { font-family: Arial, sans-serif; line-height: 1.6; background: #f9f9f9; color: #333; margin:0; padding:0; }
  header { background: #24292f; color: #fff; padding: 1rem 2rem; text-align:center; }
  h1 { margin:0; font-size:2rem; }
  section { padding: 2rem; max-width: 900px; margin:auto; background:#fff; margin-bottom:1rem; border-radius:10px; box-shadow:0 4px 8px rgba(0,0,0,0.1);}
  h2 { color:#0366d6; }
  pre { background:#f0f0f0; padding:1rem; overflow-x:auto; border-radius:5px; white-space: pre-wrap; }
  table { width:100%; border-collapse: collapse; margin:1rem 0; }
  th, td { border:1px solid #ddd; padding:0.5rem; text-align:left; }
  th { background:#0366d6; color:#fff; }
  .diagram { text-align:left; margin:1rem 0; font-family: monospace; background:#f0f0f0; padding:1rem; border-radius:5px; white-space: pre-wrap;}
  footer { text-align:center; padding:1rem; background:#24292f; color:#fff; margin-top:1rem;}
  a.button { display:inline-block; padding:0.5rem 1rem; margin-top:0.5rem; background:#28a745; color:#fff; text-decoration:none; border-radius:5px;}
  a.button:hover { background:#218838; }
  code { background:#e8e8e8; padding:0.2rem 0.4rem; border-radius:3px;}
</style>
</head>
<body>

<header>
  <h1>SonarQube Quick Guide</h1>
  <p>Setup & Workflows: SonarCloud, VPS, Local Pre-commit Hooks</p>
</header>

<section>
  <h2>1Ô∏è‚É£ SonarCloud (Cloud / Open Source)</h2>
  <p><strong>Goal:</strong> Integrate code analysis in GitHub Actions with mandatory Quality Gate.</p>

  <h3>Setup Steps:</h3>
  <ol>
    <li>Create account on <a href="https://sonarcloud.io" target="_blank">SonarCloud</a></li>
    <li>Connect your GitHub repository</li>
    <li>Generate an authentication token and store it in <strong>GitHub Secrets</strong> (e.g., <code>SONAR_TOKEN</code>)</li>
    <li>Create GitHub Actions workflow <code>.github/workflows/sonarcloud.yml</code> with build, test and sonar analysis</li>
  </ol>

  <pre><code>dotnet sonarscanner begin /k:"project-key" /o:"org-key" /d:sonar.token="${{ secrets.SONAR_TOKEN }}"
dotnet build
dotnet test --logger:trx
dotnet sonarscanner end /d:sonar.token="${{ secrets.SONAR_TOKEN }}"</code></pre>

  <h3>Workflow Diagram:</h3>
  <div class="diagram">
GitHub Actions (GitHub server) ‚Äì Open Source Cloud
    ‚Üì (HTTPS, using token from GitHub Secrets)
1Ô∏è‚É£ Creates Ubuntu VM (runner)
2Ô∏è‚É£ Clones your repo
3Ô∏è‚É£ Installs .NET SDK, Java JDK, and SonarScanner
4Ô∏è‚É£ Compiles the code
5Ô∏è‚É£ Runs unit/integration tests
6Ô∏è‚É£ Analyzes code with SonarScanner
    ‚Üì (via API)
7Ô∏è‚É£ Sends ONLY results ‚Üí SonarCloud
    ‚Üì
SonarCloud (cloud server)
8Ô∏è‚É£ Processes results
9Ô∏è‚É£ Applies Quality Gate
üîü Responds ‚úÖ or ‚ùå
    ‚Üì
GitHub Actions
1Ô∏è‚É£1Ô∏è‚É£ Marks the check as successful/failed
  </div>

  <p><strong>Key Features:</strong> Quality Gate enforcement, tests & coverage, metrics only (no source code), PR integration. Communication with SonarCloud is secured via HTTPS.</p>
</section>

<section>
  <h2>2Ô∏è‚É£ Self-hosted SonarQube (VPS / Enterprise)</h2>
  <p><strong>Goal:</strong> Full control over server & data; analysis in CI/CD.</p>

  <h3>Setup Steps:</h3>
  <ol>
    <li>Install SonarQube on VPS</li>
    <li>Open port 9000 for access</li>
    <li>Create user & token</li>
    <li>Configure GitHub Actions workflow to point to VPS using the token from GitHub Secrets</li>
    <li>Run build, tests and sonar end</li>
  </ol>

  <h3>Workflow Diagram:</h3>
  <div class="diagram">
GitHub Actions (GitHub server)
    ‚Üì (HTTPS, using token from GitHub Secrets)
1Ô∏è‚É£ Executes workflow (.yml)
2Ô∏è‚É£ Creates Ubuntu VM (runner)
3Ô∏è‚É£ Clones repo
4Ô∏è‚É£ Installs .NET SDK, Java JDK, and SonarScanner
    ‚Üì (via HTTP/HTTPS)
VPS (your private server with public IP)
5Ô∏è‚É£ GitHub Actions sends instruction: "Clone this repo and analyze it"
6Ô∏è‚É£ SonarQube server clones repo
7Ô∏è‚É£ Compiles code
8Ô∏è‚É£ Runs tests
9Ô∏è‚É£ Performs complete SonarQube analysis
üîü Saves results in VPS database
1Ô∏è‚É£1Ô∏è‚É£ Responds to GitHub Actions ‚úÖ or ‚ùå
    ‚Üì
GitHub Actions
1Ô∏è‚É£2Ô∏è‚É£ Marks the check as successful/failed
  </div>

  <p><strong>Key Features:</strong> Full data control, internal repos, Quality Gates supported, requires maintenance. Communication between GitHub Actions and VPS is over HTTP/HTTPS with token authentication.</p>
</section>

<section>
  <h2>3Ô∏è‚É£ Local Pre-commit Hooks</h2>
  <p><strong>Goal:</strong> Immediate feedback before committing code.</p>

  <h3>Setup Steps:</h3>
  <ol>
    <li>Install <code>dotnet-sonarscanner</code> locally</li>
    <li>Create <code>.git/hooks/pre-commit</code> with analysis script</li>
    <li>Set your Sonar token in environment variable, e.g., <code>$env:SONAR_TOKEN</code></li>
    <li>Make script executable (<code>chmod +x .git/hooks/pre-commit</code>)</li>
    <li>Every commit runs analysis before saving</li>
  </ol>

  <h3>Workflow Diagram:</h3>
  <div class="diagram">
Developer's Local Machine
    ‚Üì
1Ô∏è‚É£ Makes code changes
2Ô∏è‚É£ Executes: git commit -m "message"
    ‚Üì
3Ô∏è‚É£ Git triggers pre-commit hook
4Ô∏è‚É£ Hook executes dotnet-sonarscanner locally
5Ô∏è‚É£ Analyzes code on developer's machine
6Ô∏è‚É£ Sends ONLY results ‚Üí SonarCloud
    ‚Üì (HTTPS using local token)
SonarCloud (cloud server)
7Ô∏è‚É£ Processes results
8Ô∏è‚É£ Stores in dashboard
9Ô∏è‚É£ Returns ‚úÖ or ‚ùå
    ‚Üì
Pre-commit hook
1Ô∏è‚É£0Ô∏è‚É£ If ‚úÖ ‚Üí Commit proceeds
1Ô∏è‚É£1Ô∏è‚É£ If ‚ùå ‚Üí Commit is blocked
  </div>

  <p><strong>Key Features:</strong> Immediate feedback, prevents bad commits, skips tests for speed, token per developer, optional bypass. Communication with SonarCloud is secured via HTTPS.</p>
</section>

<section>
  <h2>üîÑ Quick Comparison</h2>
  <table>
    <tr>
      <th>Feature</th>
      <th>SonarCloud</th>
      <th>VPS SonarQube</th>
      <th>Local Pre-commit</th>
    </tr>
    <tr><td>Installation</td><td>None</td><td>VPS setup</td><td>Local</td></tr>
    <tr><td>CI/CD integration</td><td>‚úÖ Workflow</td><td>‚úÖ Workflow</td><td>‚ùå Hook</td></tr>
    <tr><td>Quality Gate</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ (Local)</td></tr>
    <tr><td>Immediate Feedback</td><td>‚ùå</td><td>‚ùå</td><td>‚úÖ Hook</td></tr>
    <tr><td>Maintenance</td><td>‚ùå</td><td>‚úÖ</td><td>‚ùå</td></tr>
    <tr><td>Data Privacy</td><td>Cloud</td><td>Full control</td><td>Local</td></tr>
    <tr><td>Team Sharing</td><td>‚úÖ</td><td>‚úÖ</td><td>‚ùå</td></tr>
  </table>
</section>

<footer>
  <p>Created by Juan Carlos Diaz ‚Äì SonarQube Quick Guide</p>
  <a class="button" href="https://github.com/JuanCarlosDiaz/sonarqube-manual" target="_blank">View GitHub Repo</a>
</footer>

</body>
</html>
