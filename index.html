<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SonarQube Quick Guide</title>
<style>
  body { font-family: Arial, sans-serif; line-height: 1.6; background: #f9f9f9; color: #333; margin:0; padding:0; }
  header { background: #24292f; color: #fff; padding: 1rem 2rem; text-align:center; }
  h1 { margin:0; font-size:2rem; }
  section { padding: 2rem; max-width: 900px; margin:auto; background:#fff; margin-bottom:1rem; border-radius:10px; box-shadow:0 4px 8px rgba(0,0,0,0.1);}
  h2 { color:#0366d6; }
  pre { background:#f0f0f0; padding:1rem; overflow-x:auto; border-radius:5px; white-space: pre-wrap; }
  table { width:100%; border-collapse: collapse; margin:1rem 0; }
  th, td { border:1px solid #ddd; padding:0.5rem; text-align:left; }
  th { background:#0366d6; color:#fff; }
  .diagram { text-align:left; margin:1rem 0; font-family: monospace; background:#f0f0f0; padding:1rem; border-radius:5px; white-space: pre-wrap;}
  footer { text-align:center; padding:1rem; background:#24292f; color:#fff; margin-top:1rem;}
  a.button { display:inline-block; padding:0.5rem 1rem; margin-top:0.5rem; background:#28a745; color:#fff; text-decoration:none; border-radius:5px;}
  a.button:hover { background:#218838; }
</style>
</head>
<body>

<header>
  <h1>SonarQube Quick Guide</h1>
  <p>Setup & Workflows: SonarCloud, VPS, Local Pre-commit Hooks</p>
</header>

<section>
  <h2>1ï¸âƒ£ SonarCloud (Cloud / Open Source)</h2>
  <p><strong>Goal:</strong> Integrate code analysis in GitHub Actions with mandatory Quality Gate.</p>

  <h3>Setup Steps:</h3>
  <ol>
    <li>Create account on <a href="https://sonarcloud.io" target="_blank">SonarCloud</a></li>
    <li>Connect your GitHub repository</li>
    <li>Generate an authentication token and store in GitHub Secrets (SONAR_TOKEN)</li>
    <li>Create GitHub Actions workflow <code>.github/workflows/sonarcloud.yml</code> with build, test and sonar analysis</li>
  </ol>

  <pre><code>dotnet sonarscanner begin /k:"project-key" /o:"org-key" /d:sonar.token="${{ secrets.SONAR_TOKEN }}"
dotnet build
dotnet test --logger:trx
dotnet sonarscanner end /d:sonar.token="${{ secrets.SONAR_TOKEN }}"</code></pre>

  <h3>Workflow Diagram:</h3>
  <div class="diagram">
GitHub Actions (GitHub server) open source cloud
    â†“
1. Clones your repo
2. Compiles the code
3. Runs tests
4. Analyzes with SonarScanner
    â†“
5. Sends ONLY the results â†’ SonarCloud
    â†“
SonarCloud (cloud server)
    â†“
6. Processes results
7. Applies Quality Gate
8. Responds âœ… or âŒ
    â†“
GitHub Actions
    â†“
9. Marks the check as successful/failed
  </div>

  <p><strong>Key Features:</strong> Quality Gate enforcement, tests & coverage, metrics only (no source code), PR integration.</p>
</section>

<section>
  <h2>2ï¸âƒ£ Self-hosted SonarQube (VPS / Enterprise)</h2>
  <p><strong>Goal:</strong> Full control over server & data; analysis in CI/CD.</p>

  <h3>Setup Steps:</h3>
  <ol>
    <li>Install SonarQube on VPS</li>
    <li>Open port 9000 for access</li>
    <li>Create user & token</li>
    <li>Configure GitHub Actions to point to VPS</li>
    <li>Run build, tests and sonar end</li>
  </ol>

  <h3>Workflow Diagram:</h3>
  <div class="diagram">
GitHub Actions (GitHub server)
    â†“
1. Executes the .yml
2. The .yml says: "Connect to MY VPS at http://my-vps-ip:9000"
    â†“
    â†“ (via HTTP/HTTPS)
    â†“
VPS (your private server with public IP)
    â†“
3. GitHub Actions sends instruction to VPS: "Clone this repo and analyze it"
    â†“
4. SonarQube Server (on the VPS) clones your repo
5. SonarQube compiles the code
6. SonarQube runs tests
7. SonarQube performs complete analysis
8. SonarQube saves results in its DB (also on the VPS)
9. SonarQube responds to GitHub: âœ… or âŒ
    â†“
GitHub Actions
    â†“
10. Marks the check as successful/failed
  </div>

  <p><strong>Key Features:</strong> Full data control, internal repos, Quality Gates supported, requires maintenance.</p>
</section>

<section>
  <h2>3ï¸âƒ£ Local Pre-commit Hooks</h2>
  <p><strong>Goal:</strong> Immediate feedback before committing code.</p>

  <h3>Setup Steps:</h3>
  <ol>
    <li>Install <code>dotnet-sonarscanner</code> locally</li>
    <li>Create <code>.git/hooks/pre-commit</code> with analysis script</li>
    <li>Make script executable (<code>chmod +x .git/hooks/pre-commit</code>)</li>
    <li>Every commit runs analysis before saving</li>
  </ol>

  <h3>Workflow Diagram:</h3>
  <div class="diagram">
Developer's Local Machine
    â†“
1. Makes code changes
2. Executes: git commit -m "message"
    â†“
3. Git triggers pre-commit hook
    â†“
4. Hook executes dotnet-sonarscanner locally
5. Analyzes code on developer's machine
6. Sends ONLY results â†’ SonarCloud
    â†“
SonarCloud (cloud server)
    â†“
7. Processes results
8. Stores in dashboard
9. Returns âœ… or âŒ
    â†“
Pre-commit hook
    â†“
10. If âœ… â†’ Commit proceeds
11. If âŒ â†’ Commit is blocked
  </div>

  <p><strong>Key Features:</strong> Immediate feedback, prevents bad commits, skips tests for speed, token per developer, optional bypass.</p>
</section>

<section>
  <h2>ğŸ”„ Quick Comparison</h2>
  <table>
    <tr>
      <th>Feature</th>
      <th>SonarCloud</th>
      <th>VPS SonarQube</th>
      <th>Local Pre-commit</th>
    </tr>
    <tr><td>Installation</td><td>None</td><td>VPS setup</td><td>Local</td></tr>
    <tr><td>CI/CD integration</td><td>âœ…</td><td>âœ…</td><td>âŒ</td></tr>
    <tr><td>Quality Gate</td><td>âœ…</td><td>âœ…</td><td>âœ… (Local)</td></tr>
    <tr><td>Immediate Feedback</td><td>âŒ</td><td>âŒ</td><td>âœ…</td></tr>
    <tr><td>Maintenance</td><td>âŒ</td><td>âœ…</td><td>âŒ</td></tr>
    <tr><td>Data Privacy</td><td>Cloud</td><td>Full control</td><td>Local</td></tr>
    <tr><td>Team Sharing</td><td>âœ…</td><td>âœ…</td><td>âŒ</td></tr>
  </table>
</section>

<footer>
  <p>Created by Juan Carlos Diaz â€“ SonarQube Quick Guide</p>
  <a class="button" href="https://github.com/JuanCarlosDiaz/sonarqube-manual" target="_blank">View GitHub Repo</a>
</footer>

</body>
</html>
